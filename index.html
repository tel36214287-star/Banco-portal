<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Banco Jussara - Portal do Cliente</title>
<style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; color:#333; }
    header { background:#003366; color:#fff; padding:20px; text-align:center; }
    nav { display:flex; justify-content:center; gap:20px; background:#0055a5; padding:10px 0; }
    nav a { color:#fff; text-decoration:none; font-weight:bold; }
    nav a:hover { color:#ffcc00; }
    .container { max-width:950px; margin:30px auto; padding:20px; background:#fff; border-radius:8px; }
    .login-section { text-align:center; margin-bottom:30px; }
    .login-section input { padding:10px; margin:5px; width:200px; border-radius:5px; border:1px solid #ccc; }
    .login-section button { padding:10px 20px; background:#003366; color:#fff; border:none; border-radius:5px; cursor:pointer; font-weight:bold; }
    .login-section button:hover { background:#0055a5; }
    .client-section { text-align:center; margin-bottom:30px; }
    .client-section img { width:120px; height:120px; border-radius:50%; border:3px solid #003366; margin-bottom:10px; object-fit:cover; }
    .saldo { text-align:center; margin-bottom:30px; color:#003366; font-size:1.5rem; }
    table { width:100%; border-collapse:collapse; margin-bottom:20px; }
    th, td { padding:12px; border-bottom:1px solid #ddd; text-align:left; }
    th { background:#f0f0f0; }
    table tr:hover { background:#f9f9f9; }
    .hidden { display:none; }
</style>
</head>
<body>

<header>
    <h1>Banco Jussara</h1>
</header>

<nav>
    <a href="#">Início</a>
    <a href="#" id="link-extrato" class="hidden">Extrato</a>
</nav>

<div class="container">
    <!-- Login -->
    <section class="login-section" id="login-section">
        <h2>Login do Cliente</h2>
        <input type="text" id="cpf" placeholder="CPF">
        <input type="password" id="senha" placeholder="Senha"><br>
        <button onclick="login()">Entrar</button>
        <p id="login-msg" style="color:red;"></p>
    </section>

    <!-- Área do Cliente -->
    <section class="client-section hidden" id="client-section">
        <img src="publics/client_img.png" alt="Imagem do Cliente">
        <h3 id="nome-cliente"></h3>
        <div class="saldo" id="saldo"></div>
        <h3>Extrato</h3>
        <table id="extrato-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Descrição</th>
                    <th>Valor</th>
                    <th>Tipo</th>
                </tr>
            </thead>
            <tbody>
                <!-- Transações serão inseridas aqui -->
            </tbody>
        </table>
    </section>
</div>

<script>
// Função para buscar JSON
async function fetchClientes() {
    const response = await fetch('publics/bd.json');
    const data = await response.json();
    return data.clientes;
}

// Login
async function login() {
    const cpf = document.getElementById('cpf').value;
    const senha = document.getElementById('senha').value;
    const clientes = await fetchClientes();

    const cliente = clientes.find(c => c.cpf === cpf && c.senha === senha);

    const msg = document.getElementById('login-msg');
    if(cliente) {
        // Exibe área do cliente
        document.getElementById('login-section').classList.add('hidden');
        document.getElementById('client-section').classList.remove('hidden');

        // Atualiza dados do cliente
        document.getElementById('nome-cliente').innerText = `Olá, ${cliente.nome}!`;
        document.getElementById('saldo').innerText = `Saldo Atual: R$ ${cliente.saldo.toFixed(2)}`;

        // Preenche extrato
        const tbody = document.getElementById('extrato-table').querySelector('tbody');
        tbody.innerHTML = '';
        cliente.extrato.forEach(t => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${t.data}</td><td>${t.descricao}</td><td>${t.tipo === 'Crédito' ? '+ ' : '- '}R$ ${t.valor.toFixed(2)}</td><td>${t.tipo}</td>`;
            tbody.appendChild(tr);
        });

        // Exibe link de extrato no nav
        document.getElementById('link-extrato').classList.remove('hidden');

    } else {
        msg.innerText = 'CPF ou senha incorretos!';
    }
}
</script>

</body>
</html>
